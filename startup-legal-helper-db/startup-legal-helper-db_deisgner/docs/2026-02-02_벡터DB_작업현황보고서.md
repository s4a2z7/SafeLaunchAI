# SafeLaunch AI - 벡터DB / DB 담당자 작업현황 보고서

**보고일자:** 2026-02-02
**작성 기준:** main 브랜치 (commit: 3dc4bee)
**수신:** Logic 담당자 (팀원 B), UI/UX 담당자 (팀원 C)
**문서 목적:** DB 인프라 현황 공유 및 후속 모듈 개발을 위한 인터페이스 가이드

---

## 1. 전체 진행 현황 요약

### 1.1 DB 담당 모듈 진행률

```
완료: 4개 / 전체: 5개 모듈
진행률: ████████████████░░░░ 80%
```

| 모듈 | 상태 | 최종 업데이트 | 비고 |
|------|:----:|:------------:|------|
| `core/law_api.py` | **완료** | 01-31 | 국가법령정보 Open API 래퍼 |
| `core/legal_rag.py` | **완료** | 02-01 | VectorStore + 검색 + 동기화 |
| `core/store_policy_data.py` | **완료** | 02-01 | Apple/Google 정책 데이터 |
| `ingest_store_policies.py` | **완료** | 02-01 | 스토어 정책 적재 스크립트 |
| `core/benchmarker.py` | **미구현** | - | URL 스크래핑 (팀원 A 담당) |

### 1.2 데이터 수집 현황

| 컬렉션 | 파일 | 문서(청크) 수 | 상태 |
|--------|------|:------------:|:----:|
| **법령** (laws) | `database/laws.json` | 1,458건 | **완료** |
| **판례** (precedents) | `database/precedents.json` | 712건 | **완료** (02-02 재수집 완료) |
| **스토어 정책** (store_policies) | `database/store_policies.json` | 36건 | **완료** (02-01 신규 적재) |
| **합계** | - | **2,206건** | - |

---

## 2. 컬렉션별 상세 현황

### 2.1 법령 컬렉션 (laws) - 1,458 청크

**데이터 소스:** 국가법령정보 Open API (`law.go.kr`)

**수집된 법령 분류 (46개 법령):**

| 분야 | 수집된 법령 | 청크 수 |
|------|------------|:-------:|
| 저작권 | 저작권법, 시행령, 시행규칙 | 152 |
| 전자상거래 | 전자상거래법, 시행령, 시행규칙 | 76 |
| 개인정보보호 | 개인정보 보호법, 시행령 외 5건 | 183 |
| 정보통신망 | 정보통신망법, 시행령, 시행규칙 | 122 |
| 특허 | 특허법, 시행령, 시행규칙 외 | 360 |
| 상표 | 상표법, 시행령, 시행규칙 외 | 186 |
| 소프트웨어산업 | 소프트웨어 진흥법, 시행령, 시행규칙 | 89 |
| 소비자기본 | 소비자기본법, 시행령 | 83 |
| 위치정보 | 위치정보법, 시행령 | 69 |
| 콘텐츠산업 | 콘텐츠산업 진흥법, 시행령, 시행규칙 | 49 |
| 부정경쟁방지 | 부정경쟁방지법, 시행령 | 41 |
| 통신비밀보호 | 통신비밀보호법, 시행령 | 51 |
| 전자서명 | 전자서명법, 시행령, 시행규칙 외 | 20 |

**메타데이터 구조:**
```json
{
  "source_type": "law",
  "source_id": "law_270165",
  "law_id": "270165",
  "law_name": "저작권법",
  "proclamation_date": "20250325",
  "enforcement_date": "20250926",
  "chunk_index": 0
}
```

### 2.2 판례 컬렉션 (precedents) - 712 청크

**데이터 소스:** 국가법령정보 Open API (판례 검색)
**재수집 일자:** 2026-02-02 (개선된 추출 로직 + API 파라미터 버그 수정 후)

**수집 키워드 (13개):**

| 키워드 | 주요 수집 판례 |
|--------|--------------|
| 저작권 침해 | 저작권침해금지등, 손해배상 |
| 프로그램 저작권 | 프로그램저작권침해, 소프트웨어 관련 |
| 영업비밀 침해 | 부정경쟁방지법 위반, 영업비밀침해금지 |
| 개인정보 유출 | 개인정보보호법위반, 유출 손해배상 |
| 개인정보 처리 | 개인정보처리 관련 행정처분 |
| 소비자 보호 | 소비자보호법위반 |
| 온라인 서비스 | 온라인서비스 관련 분쟁 |
| 디지털 콘텐츠 | 디지털콘텐츠 저작권 |
| 정보통신망 침해 | 컴퓨터등장애업무방해 |
| 특허 침해 | 특허권침해금지 |
| 상표권 침해 | 상표권이전등록 |
| 부정경쟁 모방 | 부정경쟁행위금지 |
| 콘텐츠 저작권 | 콘텐츠 저작권침해 |

**품질 현황:**
- 기존 71건 CSS/JS 오염 데이터 전량 정화 후, 개선된 추출 로직으로 재수집
- API 파라미터 버그 수정 (`precSeq` → `ID`)으로 정상적인 판례 본문 수신
- 3단계 품질 검증 (노이즈 감지 → 최소 길이 → 법률 키워드) 적용
- 판례 전용 청킹 (섹션 헤더 기반, 1200자/300자 오버랩) 적용

### 2.3 스토어 정책 컬렉션 (store_policies) - 36 청크

**02-01 신규 적재 완료**

**Apple App Store Review Guidelines (20개 섹션):**

| 카테고리 | 섹션 수 | 주요 내용 |
|----------|:-------:|-----------|
| 1. Safety | 5 | 부적절한 콘텐츠, UGC, 키즈, 신체적 위해, 개발자 정보 |
| 2. Performance | 3 | 앱 완성도, 메타데이터, 하드웨어/소프트웨어 |
| 3. Business | 4 | 인앱 구매, 구독, 결제, 비즈니스 모델 |
| 4. Design | 3 | 카피캣, 최소 기능, 스팸/미니앱 |
| 5. Legal | 5 | 데이터 수집/공유, 건강/어린이, IP/도박, VPN |

**Google Play Developer Program Policy (16개 섹션):**

| 카테고리 | 섹션 수 | 주요 내용 |
|----------|:-------:|-----------|
| Restricted Content | 4 | 아동 안전, 부적절한 콘텐츠, 금융/도박, UGC/블록체인 |
| Privacy/Deception/Device | 3 | 사용자 데이터, 기만적 행위, 기기 악용 |
| Intellectual Property | 1 | 저작권/상표/위조 |
| Monetization & Ads | 2 | 결제/구독, 광고 정책 |
| 기타 | 6 | Store Listing, Spam, Malware, SDK, Families, Enforcement |

**메타데이터 구조:**
```json
{
  "store": "apple",
  "policy_name": "App Store Review Guidelines",
  "section": "1. Safety",
  "subsection": "1.1 Objectionable Content",
  "effective_date": "2026-01",
  "source_type": "store_policy",
  "source_id": "apple_1. Safety_1.1 Objectionable Content",
  "chunk_index": 0
}
```

---

## 3. 기술 구현 현황

### 3.1 벡터 스토어 아키텍처

```
┌─────────────────────────────────────────────────────┐
│                   VectorStore 클래스                  │
│  (core/legal_rag.py, JSON 백엔드 + TF-IDF 검색)      │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌──────────┐  ┌──────────┐  ┌──────────────────┐  │
│  │laws.json │  │precedents│  │store_policies    │  │
│  │1,458 청크 │  │.json     │  │.json             │  │
│  │          │  │712 청크   │  │36 청크            │  │
│  └──────────┘  └──────────┘  └──────────────────┘  │
│                                                     │
│  벡터화: TF-IDF 하이브리드 (word 60% + char_wb 40%) │
│  유사도: Cosine Similarity                          │
│  청킹: 법령→조문 단위(800자/150자), 판례→섹션 헤더(1200자/300자) │
└─────────────────────────────────────────────────────┘
```

**구현 배경:** Python 3.14 환경에서 ChromaDB(Pydantic v1 의존)가 미지원되어 scikit-learn TF-IDF 기반으로 구현. ChromaDB 호환 인터페이스를 유지하여 향후 마이그레이션 용이.

### 3.2 데이터 파이프라인

```
[외부 API / 정적 데이터]
        │
        ▼
┌──────────────────┐
│  law_api.py      │ ─── 국가법령정보 API (법령/판례 검색·상세 조회)
│  store_policy    │ ─── 하드코딩된 Apple/Google 정책 데이터
│  _data.py        │
└────────┬─────────┘
         │ 원본 텍스트 + 메타데이터
         ▼
┌──────────────────┐
│  legal_rag.py    │ ─── 텍스트 정제 → 청킹 → TF-IDF 벡터화 → JSON 저장
│  (ingest 함수들)  │
└────────┬─────────┘
         │ database/*.json
         ▼
┌──────────────────┐
│  VectorStore     │ ─── query() 호출 시 TF-IDF 코사인 유사도 검색
│  .query()        │
└────────┬─────────┘
         │ [{"text", "metadata", "score"}, ...]
         ▼
  search_legal_context()  ← ★ Logic 담당자가 호출할 통합 검색 함수
```

### 3.3 검색 성능 현황

| 쿼리 | Top-1 결과 | 유사도 점수 |
|------|-----------|:----------:|
| "앱 내 결제 정책 위반" | 소비자기본법 제25조 | 0.538 |
| "개인정보 수집 동의" | 개인정보 보호법 제15조 | 0.643 |
| "소프트웨어 저작권 침해 기준" | 소프트웨어 진흥법 제31조 | 0.609 |
| "앱 출시 전 법적 준비사항" | 개인정보 보호법 제63조 | 0.573 |
| "전자상거래 환불 규정" | 전자상거래법 제25조 | 0.485 |

> **score_threshold 안내:** 기본값 0.7은 법령 검색에 적합. 스토어 정책 검색 시 0.4~0.5로 낮춰야 유의미한 결과 도출 가능. Logic 담당자가 `analyzer.py` 구현 시 데이터 소스별 threshold 조정 권장.

---

## 4. Logic 담당자 (팀원 B) 참고 사항

### 4.1 사용 가능한 핵심 함수

#### (1) `search_legal_context()` - 통합 검색 (가장 중요)

```python
from core.legal_rag import search_legal_context

results = search_legal_context(
    query="앱 저작권 침해 기준",
    top_k=5,                    # 반환할 최대 결과 수
    score_threshold=0.3         # 유사도 하한 (0~1)
)
```

**반환 형식:**
```python
[
    {
        "text": "제4조(저작물의 예시 등) ① 이 법에서 말하는 저작물을 예시하면...",
        "metadata": {
            "source_type": "law",        # "law" | "precedent" | "store_policy"
            "source_id": "law_270165",
            "law_name": "저작권법",
            "proclamation_date": "20250325",
            "enforcement_date": "20250926",
            "chunk_index": 3
        },
        "score": 0.72                    # 코사인 유사도 (0~1, 높을수록 관련도 높음)
    },
    # ... 최대 top_k개
]
```

**검색 동작:**
1. 3개 컬렉션(laws, precedents, store_policies)을 **모두** 순회
2. 각 컬렉션에서 TF-IDF 코사인 유사도 계산
3. `score_threshold` 이하 결과 필터링
4. 전체 결과를 점수 내림차순 정렬 후 `top_k`개 반환

#### (2) `sync_legal_data()` - DB 동기화

```python
from core.legal_rag import sync_legal_data

result = sync_legal_data(
    queries=["저작권", "개인정보보호", "전자상거래"],
    force_refresh=False         # True 시 기존 데이터 삭제 후 재수집
)
# 반환: {"laws_added": int, "precedents_added": int, "total_chunks": int}
```

#### (3) 개별 컬렉션 직접 접근

```python
from core.legal_rag import get_or_create_collection

laws_store = get_or_create_collection("laws")
policies_store = get_or_create_collection("store_policies")

# 개별 컬렉션 검색
results = laws_store.query(query_text="저작권 침해", n_results=5)
count = laws_store.count()
```

### 4.2 analyzer.py 구현 시 연동 가이드

**RS 공식 (개발명세서 M-1):**
```
RS = (C x 0.4) + (P x 0.2) + (L x 0.2) + (O x 0.2)
```

**각 요소별 DB 활용 방법:**

| 요소 | 설명 | DB 연동 방법 |
|------|------|-------------|
| **C** (Copyright) | 기능/문구 유사도 | `benchmarker.py` 결과와 DB 법령의 저작권 관련 조항 매칭 |
| **P** (Policy) | 스토어 정책 위반 가능성 | `search_legal_context(query, ...)` 에서 `source_type == "store_policy"` 결과 활용 |
| **L** (Legal) | 법령·판례 엄격성 | `source_type == "law"` 또는 `"precedent"` 결과 활용 |
| **O** (Originality) | 기획 차별성 | `benchmarker.py` 결과 기반 (DB 미사용) |

**P(Policy) 점수 산출 예시:**
```python
# 스토어 정책 검색 시 threshold를 낮춰야 유의미한 결과 도출
policy_results = search_legal_context(
    query="인앱 결제 구독 환불",
    top_k=5,
    score_threshold=0.4    # 스토어 정책은 0.4~0.5 권장
)

# source_type으로 필터링
policy_hits = [r for r in policy_results if r["metadata"]["source_type"] == "store_policy"]
law_hits = [r for r in policy_results if r["metadata"]["source_type"] == "law"]
```

**source_type별 필터링 키:**

| source_type | 메타데이터 키 | 용도 |
|-------------|-------------|------|
| `"law"` | `law_name`, `law_id`, `proclamation_date`, `enforcement_date` | L(Legal) 점수 |
| `"precedent"` | `case_name`, `court_name`, `judgment_date`, `precedent_seq`, `case_number`, `case_type`, `source_url` | L(Legal) 점수 |
| `"store_policy"` | `store` ("apple"/"google"), `section`, `subsection`, `effective_date` | P(Policy) 점수 |

### 4.3 prompts.py 구현 시 참고

**RAG 결과를 프롬프트에 포함하는 패턴:**
```python
# search_legal_context() 결과를 LLM 프롬프트에 삽입하는 예시
rag_context = "\n\n".join([
    f"[{r['metadata']['source_type']}] {r['metadata'].get('law_name', r['metadata'].get('case_name', r['metadata'].get('subsection', '')))}:\n{r['text'][:500]}"
    for r in results
])

system_prompt = f"""당신은 IT 전문 변호사입니다.
아래 법령/판례/스토어 정책을 근거로 분석하세요.

--- 참고 법률 자료 ---
{rag_context}
--- 참고 자료 끝 ---
"""
```

**M-2 JSON 출력 스키마 (API명세서 기준):**
```json
{
  "launch_readiness_score": 78,
  "status": "Ready | Needs Fix | Blocker",
  "summary_for_user": "코치 톤 요약 텍스트",
  "fix_guide": ["대안 1", "대안 2"],
  "risk_breakdown": {
    "C": 0.2, "P": 0.4, "L": 0.1, "O": 0.7,
    "RS": 0.31
  },
  "checklist_7_steps": ["1. ...", "2. ...", "..."]
}
```

### 4.4 알려진 제한사항 (Logic 개발 시 고려)

| 항목 | 현황 | 대응 방안 |
|------|------|----------|
| TF-IDF 의미론적 한계 | 하이브리드(word+char_wb)로 개선했으나 임베딩 모델 대비 한계 존재 | 쿼리를 다양한 키워드로 확장하여 검색 (여러 번 호출) |
| 판례 품질 | 02-02 재수집으로 CSS/JS 노이즈 해결, 품질 검증 자동 적용 | 정상 사용 가능 |
| score_threshold 차이 | 법령(0.5~0.7), 스토어 정책(0.3~0.5), 판례(0.4~0.6) 범위가 다름 | 데이터 소스별 threshold를 다르게 적용하거나, 낮게 설정 후 상위 N개만 사용 |
| 검색 속도 | 전체 컬렉션 순회 방식 (2,206건 규모에서 충분히 빠름) | 대규모 확장 시 ChromaDB 마이그레이션 필요 |

---

## 5. UI/UX 담당자 (팀원 C) 참고 사항

### 5.1 대시보드에서 표시할 데이터 구조

UI가 최종적으로 표시해야 할 데이터는 `analyzer.py`와 `strategist.py`의 출력인 **M-2 JSON**입니다. 아래는 DB에서 제공되는 데이터가 최종적으로 UI에 어떻게 매핑되는지 안내합니다.

```
[사용자 URL 입력]
       │
       ▼
  benchmarker.py  →  기능/문구 추출
       │
       ▼
  legal_rag.py    →  관련 법령/판례/정책 검색 결과
       │
       ▼
  analyzer.py     →  RS 점수 + C/P/L/O 점수 계산
       │
       ▼
  strategist.py   →  Fix Guide + 7단계 체크리스트
       │
       ▼
  ┌──────────────────────────────────────────┐
  │            M-2 JSON (최종 출력)            │
  │                                          │
  │  launch_readiness_score: 78  → 게이지차트  │
  │  status: "Needs Fix"        → 신호등 배지  │
  │  summary_for_user: "..."    → 텍스트 카드  │
  │  risk_breakdown:                         │
  │    C: 0.2, P: 0.4, L: 0.1, O: 0.7       │
  │    RS: 0.31                → 레이더/바 차트 │
  │  fix_guide: [...]           → 리스트 카드  │
  │  checklist_7_steps: [...]   → 체크리스트   │
  └──────────────────────────────────────────┘
```

### 5.2 UI 컴포넌트별 데이터 매핑

#### (1) 출시 준비도 게이지 (Launch Readiness Score)

| 속성 | 값 | 비고 |
|------|------|------|
| 데이터 키 | `launch_readiness_score` | 0~100 정수 |
| 표시 형태 | 원형/반원 게이지 차트 | |
| 색상 기준 | 80+ 녹색, 50~79 노랑, 0~49 빨강 | |

#### (2) 상태 신호등 (Status Badge)

| Status 값 | 색상 | 아이콘/텍스트 | 의미 |
|-----------|------|-------------|------|
| `"Ready"` | 녹색 (#4CAF50) | 출시 준비 완료 | score >= 80, 치명적 리스크 없음 |
| `"Needs Fix"` | 노랑 (#FF9800) | 수정 필요 | 50 <= score < 80 또는 수정 권장 항목 존재 |
| `"Blocker"` | 빨강 (#F44336) | 출시 중단 | score < 50 또는 즉시 수정 필요 항목 존재 |

#### (3) C/P/L/O 세부 점수

| 요소 | 데이터 키 | 범위 | 설명 (사용자용 라벨) |
|------|----------|------|---------------------|
| C | `risk_breakdown.C` | 0~1 | 저작권 유사도 (Copyright) |
| P | `risk_breakdown.P` | 0~1 | 정책 위반 가능성 (Policy) |
| L | `risk_breakdown.L` | 0~1 | 법률 리스크 (Legal) |
| O | `risk_breakdown.O` | 0~1 | 차별성/독창성 (Originality) |
| RS | `risk_breakdown.RS` | 0~1 | 종합 리스크 지수 |

> **UI 표시 참고:** C, P, L은 낮을수록 안전, O는 높을수록 좋음. RS는 낮을수록 리스크가 낮음. 레이더 차트나 가로 바 차트로 4요소를 한 눈에 표시하면 효과적.

#### (4) 코치 요약 (Summary)

| 속성 | 값 |
|------|------|
| 데이터 키 | `summary_for_user` |
| 형태 | 1~3문단 텍스트 |
| 톤 | "함께 런칭 준비하는 파트너" (공포 유발 X) |
| 표시 | 카드형 위젯, 읽기 쉬운 폰트 |

#### (5) Fix Guide

| 속성 | 값 |
|------|------|
| 데이터 키 | `fix_guide` |
| 형태 | 문자열 배열 (각 항목이 하나의 수정 제안) |
| 표시 | 번호 매기기 리스트 또는 아코디언 카드 |
| 톤 | "이렇게 바꾸면 가능하다" 관점 |

#### (6) 7단계 체크리스트

| 속성 | 값 |
|------|------|
| 데이터 키 | `checklist_7_steps` |
| 형태 | 문자열 배열 (7개 항목) |
| 표시 | 체크박스 리스트 (사용자가 직접 체크 가능하면 이상적) |

### 5.3 DB에서 직접 표시 가능한 부가 정보

검색 결과의 메타데이터를 활용하여 "근거 법령/정책"을 표시할 수 있습니다.

**법령 근거 표시 예시:**
```
📋 관련 법령: 저작권법 (공포: 2025-03-25, 시행: 2025-09-26)
📋 관련 판례: 저작권침해금지등 - 서울고등법원 (2024.12.12)
📋 관련 정책: Apple App Store - 3.1 In-App Purchase (2026-01)
```

**메타데이터 → UI 표시 매핑:**

| source_type | 표시할 정보 | 메타데이터 키 |
|-------------|-----------|-------------|
| `law` | 법령명 + 시행일 | `law_name`, `enforcement_date` |
| `precedent` | 사건명 + 법원 + 판결일 | `case_name`, `court_name`, `judgment_date` |
| `store_policy` | 스토어명 + 섹션 | `store`, `section`, `subsection` |

### 5.4 UI 레이아웃 구성 (개발명세서 6.1 기준)

```
┌─────────────────────────────────────────────────────┐
│  SafeLaunch AI - AI 런칭 코치                         │
│  "딱딱한 법률 검사가 아닌, 함께 준비하는 파트너"          │
├─────────────────────────────────────────────────────┤
│                                                     │
│  🔗 URL 입력: [________________________] [분석하기]   │
│                                                     │
├────────────────────┬────────────────────────────────┤
│                    │                                │
│   게이지 차트       │   상태 배지                     │
│   ┌──────┐        │   ┌──────────────┐             │
│   │  78  │        │   │  Needs Fix   │             │
│   │ /100 │        │   │  🟡 수정 필요  │             │
│   └──────┘        │   └──────────────┘             │
│                    │                                │
├────────────────────┴────────────────────────────────┤
│                                                     │
│  📊 리스크 분석 (C/P/L/O)                            │
│  ├─ C (저작권): ████████░░ 0.2                      │
│  ├─ P (정책):   ████░░░░░░ 0.4                      │
│  ├─ L (법률):   █░░░░░░░░░ 0.1                      │
│  └─ O (독창성): ███████░░░ 0.7                      │
│                                                     │
├─────────────────────────────────────────────────────┤
│                                                     │
│  💬 코치 의견                                        │
│  "전반적으로 런칭 가능한 수준입니다. 다만 결제 정책      │
│   문구를 앱스토어 가이드에 맞게 한 곳만 보완하면        │
│   더 안전합니다."                                    │
│                                                     │
├─────────────────────────────────────────────────────┤
│                                                     │
│  🔧 수정 가이드 (Fix Guide)                          │
│  1. 인앱 결제 안내 문구에 '구독 해지 방법' 링크 명시    │
│  2. 개인정보 처리방침 링크를 앱 내 설정 메뉴에 노출     │
│                                                     │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ✅ 출시 전 7단계 체크리스트                           │
│  ☐ 1. 결제 정책 문구 보완                             │
│  ☐ 2. 개인정보처리방침 링크 노출                       │
│  ☐ 3. ...                                           │
│                                                     │
├─────────────────────────────────────────────────────┤
│                                                     │
│  📋 참고 법률 근거                                    │
│  • 저작권법 (시행: 2025-09-26)                        │
│  • Apple App Store - 3.1 In-App Purchase             │
│  • 개인정보 보호법 제15조                              │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 5.5 Streamlit 컴포넌트 권장 매핑

| UI 요소 | Streamlit 컴포넌트 | 비고 |
|---------|-------------------|------|
| URL 입력 | `st.text_input()` + `st.button()` | |
| 게이지 차트 | `st.plotly_chart()` 또는 커스텀 HTML | Plotly gauge |
| 상태 배지 | `st.markdown()` with HTML/CSS | 색상 배경 |
| C/P/L/O 바 차트 | `st.bar_chart()` 또는 `st.plotly_chart()` | |
| 코치 요약 | `st.info()` 또는 `st.markdown()` | 카드 스타일 |
| Fix Guide | `st.markdown()` (순서 리스트) | |
| 체크리스트 | `st.checkbox()` 반복 | 7개 항목 |
| 법률 근거 | `st.expander()` | 접기/펼치기 |

---

## 6. Red Team 리뷰 대응 현황

2026-02-01 Red Team 리뷰에서 제기된 10가지 이슈에 대한 대응 현황:

| # | 이슈 | 심각도 | 대응 상태 | 비고 |
|:-:|------|:------:|:--------:|------|
| 1 | 판례 데이터 오염 (CSS/JS) | Critical | **해결** | API 파라미터 버그 수정 + 오염 데이터 정화 + 712청크 재수집 |
| 2 | 핵심 법령 미수집 | Critical | **해결** | 46개 법령 수집 완료 (개인정보보호법, 부정경쟁방지법, 전자상거래법 포함) |
| 3 | 스토어 정책 공백 | Critical | **해결** | 02-01 36건 적재 완료 |
| 4 | 판례 추출 로직 결함 | High | **해결** | 노이즈 필터링 + 재귀 추출 + `PrecService` 키 우선 처리 |
| 5 | TF-IDF 의미론적 한계 | High | **개선** | 하이브리드 검색 (word 60% + char_wb 40%, sublinear_tf) |
| 6 | 데이터 품질 검증 부재 | High | **해결** | `validate_legal_document()` 3단계 검증 구현 |
| 7 | 메타데이터 불완전 | Medium | **해결** | case_number, case_type, source_url 추가 |
| 8 | 동기화/버전 관리 | Medium | **해결** | `database/metadata.json` 자동 생성 |
| 9 | 에러 핸들링 미흡 | Medium | **해결** | `law_api.py` 지수 백오프 재시도 (3회) |
| 10 | 청킹 전략 개선 | Medium | **해결** | `chunk_precedent_text()` 섹션 헤더 기반 (1200자/300자) |

---

## 7. 잔여 작업 및 후속 연동 일정

### 7.1 DB 담당자 잔여 작업

| 작업 | 우선순위 | 상태 |
|------|:--------:|:----:|
| benchmarker.py URL 스크래핑 구현 | **Must** | 미착수 |
| score_threshold 데이터소스별 튜닝 테스트 | **High** | 대기 |
| 한국어 형태소 분석기(Mecab/Okt) 도입 검토 | Medium | 대기 |
| 기존 laws.json 데이터 품질 재검증 | Low | 대기 |

### 7.2 후속 모듈 개발 의존 관계

```
[DB 인프라] ──────────────────────┐
  legal_rag.py (완료)              │
  store_policy_data.py (완료)      │
  law_api.py (완료)                │
  benchmarker.py (미구현) ─────────┼──→ [Logic 모듈]
                                   │     analyzer.py (미구현)
                                   │     strategist.py (미구현)
                                   │     prompts.py (미구현)
                                   │          │
                                   │          ▼
                                   │    [UI/UX 모듈]
                                   │     app.py (미구현)
                                   └──→  ui_helper.py (미구현)
```

**핵심 의존:**
- Logic 담당자는 `search_legal_context()`를 즉시 사용 가능 (DB 인프라 완료)
- `benchmarker.py` 완성 전에도 Mock 데이터로 analyzer.py 개발 가능
- UI/UX 담당자는 M-2 JSON Mock 데이터로 레이아웃 개발 선행 가능

---

## 8. 문의처

| 담당 | 모듈 | 문의 내용 |
|------|------|----------|
| 팀원 A (DB) | `legal_rag.py`, `law_api.py`, `store_policy_data.py` | 검색 함수 사용법, 데이터 구조, threshold 조정 |
| 팀원 B (Logic) | `analyzer.py`, `strategist.py`, `prompts.py` | RS 공식 적용, LLM 프롬프트, M-2 스키마 |
| 팀원 C (UI/UX) | `app.py`, `ui_helper.py` | 대시보드 레이아웃, 시각화 컴포넌트 |

---

*보고서 끝.*
